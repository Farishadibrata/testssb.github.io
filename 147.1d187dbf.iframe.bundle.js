"use strict";(self.webpackChunktap_web_frontend=self.webpackChunktap_web_frontend||[]).push([[147],{"./src/common/table-form.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{n3:()=>deconstructReservedVariables,ZP:()=>table_form});var asyncToGenerator=__webpack_require__("./node_modules/@storybook/nextjs/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),slicedToArray=__webpack_require__("./node_modules/@storybook/nextjs/node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),esm_extends=__webpack_require__("./node_modules/@storybook/nextjs/node_modules/@babel/runtime/helpers/esm/extends.js"),defineProperty=__webpack_require__("./node_modules/@storybook/nextjs/node_modules/@babel/runtime/helpers/esm/defineProperty.js"),toConsumableArray=__webpack_require__("./node_modules/@storybook/nextjs/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),objectWithoutProperties=__webpack_require__("./node_modules/@storybook/nextjs/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),regenerator=__webpack_require__("./node_modules/@storybook/nextjs/node_modules/@babel/runtime/regenerator/index.js"),regenerator_default=__webpack_require__.n(regenerator),Select=__webpack_require__("./node_modules/@material-ui/core/esm/Select/Select.js"),MenuItem=__webpack_require__("./node_modules/@material-ui/core/esm/MenuItem/MenuItem.js"),TextField=__webpack_require__("./node_modules/@material-ui/core/esm/TextField/TextField.js"),AddCircle=__webpack_require__("./node_modules/@material-ui/icons/esm/AddCircle.js"),DeleteForever=__webpack_require__("./node_modules/@material-ui/icons/esm/DeleteForever.js"),Save=__webpack_require__("./node_modules/@material-ui/icons/esm/Save.js"),Cancel=__webpack_require__("./node_modules/@material-ui/icons/esm/Cancel.js"),Edit=__webpack_require__("./node_modules/@material-ui/icons/esm/Edit.js"),main=__webpack_require__("./node_modules/@progress/kendo-react-grid/dist/es/main.js"),es_main=__webpack_require__("./node_modules/@progress/kendo-react-inputs/dist/es/main.js"),lodash=__webpack_require__("./node_modules/lodash/lodash.js"),lodash_default=__webpack_require__.n(lodash),react=__webpack_require__("./node_modules/react/index.js"),esm=__webpack_require__("./node_modules/zustand/esm/index.mjs"),context=__webpack_require__("./node_modules/zustand/esm/context.mjs"),middleware=__webpack_require__("./node_modules/zustand/esm/middleware.mjs"),CircularProgress=__webpack_require__("./node_modules/@material-ui/core/esm/CircularProgress/CircularProgress.js"),IconButton=__webpack_require__("./node_modules/@material-ui/core/esm/IconButton/IconButton.js"),axios=__webpack_require__("./node_modules/axios/lib/axios.js"),process=__webpack_require__("./node_modules/process/browser.js");const config_ApiServiceHost="https://tap-api-service-dev.tripatra.com/",config_BlobStorageHost="https://sttripatradevblob.blob.core.windows.net/tap-dev-document/";process.env.AZURE_STORAGE_ACCESS_KEY,process.env.AZURE_STORAGE_ACCOUNT,process.env.TAP_TEMPLATE_FILENAME_VENDOR,process.env.TAP_TEMPLATE_FILENAME_MRR_MASTER,process.env.TAP_TEMPLATE_FILENAME_MRR_DIRECT_RECEIVE;var sweetalert_min=__webpack_require__("./node_modules/sweetalert/dist/sweetalert.min.js"),sweetalert_min_default=__webpack_require__.n(sweetalert_min),Error=function Error(text){return sweetalert_min_default()("Error",text,"error")},store_legacy=__webpack_require__("./node_modules/store/dist/store.legacy.js"),store_legacy_default=__webpack_require__.n(store_legacy),getToken=(__webpack_require__("./node_modules/process/browser.js").env.TOKEN_VARIABLE,function getToken(){return store_legacy_default().get("token")}),ArrowUpward=__webpack_require__("./node_modules/@material-ui/icons/esm/ArrowUpward.js"),ArrowDownward=__webpack_require__("./node_modules/@material-ui/icons/esm/ArrowDownward.js"),FileSaver_min=__webpack_require__("./node_modules/file-saver/dist/FileSaver.min.js"),FileSaver_min_default=__webpack_require__.n(FileSaver_min),console=__webpack_require__("./node_modules/console-browserify/index.js"),__jsx=react.createElement,UploadFileIcon=function UploadFileIcon(props){var _props$fileModel,_useState=(0,react.useState)(!1),loading=_useState[0],inputRef=(_useState[1],react.createRef()),_useState2=(Math.floor(1e4*Math.random()+1e3).toString(),(0,react.useState)(props.value)),fileName=_useState2[0],setFileName=_useState2[1],_useState3=(0,react.useState)(0),uploadPercentage=_useState3[0],setUploadPercentage=_useState3[1],_useState4=(0,react.useState)(null!==(_props$fileModel=null==props?void 0:props.fileModel)&&void 0!==_props$fileModel?_props$fileModel:{}),fileModel=_useState4[0];_useState4[1];return __jsx(react.Fragment,null,(0,lodash.size)(fileName)>0?__jsx((function FileComponent(_props){return __jsx(react.Fragment,null,__jsx(IconButton.Z,{type:"button",onClick:function onClick(){return function download(){fetch("".concat(config_BlobStorageHost).concat(fileName)).then((function(response){return response.blob()})).then((function(blob){FileSaver_min_default().saveAs(blob,"".concat(fileName))}))}()},variant:"contained",id:"btn_upload_file",className:"color-primary",style:{width:"90px",fontSize:"8px",padding:"5px"}},__jsx(ArrowDownward.Z,null)),"    ",(void 0!==(null==props?void 0:props.disabled)&&!1===(null==props?void 0:props.disabled)||void 0===(null==props?void 0:props.disabled))&&__jsx("span",{type:"button",id:"btn_download_file",onClick:function onClick(){setFileName(""),props.onChange("")},variant:"contained",className:"color-white background-primary boxclose"}))}),{attr:props}):__jsx((function NullComponent(_props){return __jsx(react.Fragment,null,loading?__jsx(CircularProgress.Z,{style:{color:"white",position:"fixed",top:"50%",left:"50%",zIndex:"999999999",marginTop:-12,marginLeft:-12},size:24}):__jsx(react.Fragment,null,__jsx(IconButton.Z,{type:"button",disabled:null==props?void 0:props.disabled,onClick:function onClick(){return inputRef.current.click()},variant:"contained",id:"btn_upload_file",className:"color-primary",style:{width:"90px",fontSize:"8px",padding:"5px"}},__jsx(ArrowUpward.Z,null))),__jsx("input",{type:"file",id:_props.attr.name+"_file",name:_props.attr.name+"_file",ref:inputRef,onChange:function onChange(e){!function handleFileSelected(e){var files=Array.from(e.target.files);(null==props?void 0:props.refFiles)&&(null==props||props.refFiles(files))}(e),function uploadFile(_ref){var files=_ref.target.files,data=new FormData;for(var i in data.append("file",files[0]),fileModel)data.append(i,fileModel[i]);var size=files[0].size/1024/1024,options={onUploadProgress:function onUploadProgress(progressEvent){var loaded=progressEvent.loaded,total=progressEvent.total,percent=Math.floor(100*loaded/total);percent<100&&setUploadPercentage(percent)},headers:{Authorization:"Basic ".concat(getToken())}};if(size>50)Error("Max File Size 30 MB").then((function(){}));else{var sendPostRequest=function(){var _ref2=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(){var res;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,axios.Z.post("".concat(config_ApiServiceHost,"api/StandarUploadFile"),data,options);case 3:res=_context.sent,setFileName(res.data.message),props.onChange(res.data.message),(null==props?void 0:props.feedback)&&(null==props||props.feedback(res.data)),setUploadPercentage(100),setTimeout((function(){setUploadPercentage(0)}),1e3),console.log("upload message : "+res.data.message),_context.next=17;break;case 12:if(_context.prev=12,_context.t0=_context.catch(0),_context.t0.status){_context.next=17;break}return _context.next=17,Error("Failed to uploading document");case 17:case"end":return _context.stop()}}),_callee,null,[[0,12]])})));return function sendPostRequest(){return _ref2.apply(this,arguments)}}();sendPostRequest()}}(e)},style:{display:"none"}}),"    ",uploadPercentage>0?"".concat(uploadPercentage,"% of 100% "):"")}),{attr:props}))};UploadFileIcon.__docgenInfo={description:"",methods:[],displayName:"UploadFileIcon"};const upload_file_icon=UploadFileIcon;var classCallCheck=__webpack_require__("./node_modules/@storybook/nextjs/node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),createClass=__webpack_require__("./node_modules/@storybook/nextjs/node_modules/@babel/runtime/helpers/esm/createClass.js"),assertThisInitialized=__webpack_require__("./node_modules/@storybook/nextjs/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),inherits=__webpack_require__("./node_modules/@storybook/nextjs/node_modules/@babel/runtime/helpers/esm/inherits.js"),possibleConstructorReturn=__webpack_require__("./node_modules/@storybook/nextjs/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),getPrototypeOf=__webpack_require__("./node_modules/@storybook/nextjs/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),debounce=__webpack_require__("./node_modules/lodash/debounce.js"),debounce_default=__webpack_require__.n(debounce),debouncedInputTextField_jsx=react.createElement;function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=(0,getPrototypeOf.Z)(Derived);if(hasNativeReflectConstruct){var NewTarget=(0,getPrototypeOf.Z)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return(0,possibleConstructorReturn.Z)(this,result)}}var Autocomplete=__webpack_require__("./node_modules/@material-ui/lab/esm/Autocomplete/Autocomplete.js"),_excluded=["selected","inEdit","rowIndex"],table_form_jsx=react.createElement;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,defineProperty.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var _createContext=(0,context.Z)(),Provider=_createContext.Provider,useStore=_createContext.useStore,deconstructReservedVariables=function deconstructReservedVariables(source){return source.map((function(_ref){_ref.selected,_ref.inEdit,_ref.rowIndex;return(0,objectWithoutProperties.Z)(_ref,_excluded)}))},tableFormSlices=((0,context.Z)({data:{},setData:function setData(){}}),function tableFormSlices(set){return{data:[],initialData:[],previousData:[],setInitialData:function setInitialData(data){return set((function(state){return{data:(0,toConsumableArray.Z)(data),returnedData:(0,toConsumableArray.Z)(deconstructReservedVariables(data)),previousData:state.data}}))},saveEditAll:function saveEditAll(){return set((function(state){return{previousData:state.data}}))},cancelEditAll:function cancelEditAll(){return set((function(state){return{data:state.previousData}}))},setData:function setData(data){return set((function(state){return JSON.stringify(deconstructReservedVariables(data))===JSON.stringify(deconstructReservedVariables(state.data))?{data:(0,toConsumableArray.Z)(data)}:{data:(0,toConsumableArray.Z)(data),returnedData:(0,toConsumableArray.Z)(deconstructReservedVariables(data))}}))},addData:function addData(data){set((function(state){return{data:[].concat((0,toConsumableArray.Z)(state.data),[data])}}))},isEditing:!1,toggleIsEditing:function toggleIsEditing(){return set((function(state){var toggleEditData=state.data.map((function(item){return _objectSpread(_objectSpread({},item),{},{inEdit:!state.isEditing})}));return{isEditing:!state.isEditing,data:toggleEditData}}))},selectedData:[],allSelected:!1,toggleAllSelected:function toggleAllSelected(){set((function(state){return{allSelected:!state.allSelected}}))},AddSelectedData:function AddSelectedData(rowIndex){set((function(state){var findItem=state.data.filter((function(item){return item.rowIndex===rowIndex}))[0];return{selectedData:[].concat((0,toConsumableArray.Z)(state.selectedData),[findItem])}}))},removeSelectedData:function removeSelectedData(rowIndex){set((function(state){var newItem=state.selectedData.filter((function(item){return item.rowIndex!==rowIndex}));return{selectedData:(0,toConsumableArray.Z)(newItem)}}))},setSelectedData:function setSelectedData(data){set((function(){return{selectedData:(0,toConsumableArray.Z)(data)}}))},EditRow:function EditRow(rowIndex){set((function(state){var newData=state.data.map((function(item){return item.rowIndex===rowIndex?_objectSpread(_objectSpread({},item),{},{inEdit:!item.inEdit}):item}));return{data:(0,toConsumableArray.Z)(newData),returnedData:(0,toConsumableArray.Z)(deconstructReservedVariables(newData))}}))},saveEdit:function saveEdit(rowIndex){set((function(state){var newRow=state.data.filter((function(item){return item.rowIndex===rowIndex}))[0],prevData=state.previousData.map((function(item){return item.rowIndex===rowIndex?_objectSpread(_objectSpread({},newRow),{},{inEdit:!newRow.inEdit}):item})),newData=state.data.map((function(item){return item.rowIndex===rowIndex?_objectSpread(_objectSpread({},newRow),{},{inEdit:!newRow.inEdit}):item}));return{data:(0,toConsumableArray.Z)(newData),previousData:(0,toConsumableArray.Z)(prevData),returnedData:(0,toConsumableArray.Z)(deconstructReservedVariables(newData))}}))},cancelEdit:function cancelEdit(rowIndex){set((function(state){var prevData=state.previousData.filter((function(item){return item.rowIndex===rowIndex}))[0],newData=state.previousData.map((function(item){return item.rowIndex===rowIndex?_objectSpread(_objectSpread({},prevData),{},{inEdit:item.inEdit}):item}));return{data:(0,toConsumableArray.Z)(newData),returnedData:(0,toConsumableArray.Z)(deconstructReservedVariables(newData))}}))},deleteRow:function deleteRow(rowIndex){set((function(state){var newData=state.data.filter((function(item){return item.rowIndex!==rowIndex}));return{data:(0,toConsumableArray.Z)(newData),returnedData:(0,toConsumableArray.Z)(deconstructReservedVariables(newData))}}))}}}),SaveEngine={getItem:function getItem(){return sessionStorage.getItem()},setItem:function setItem(name,value){return 0!==JSON.parse(value).state.data.length&&localStorage.setItem(name,value),sessionStorage.setItem(name,value)},removeItem:function removeItem(name){return sessionStorage.removeItem(name)}},TableForm=(0,react.forwardRef)((function(props,ref){return table_form_jsx(Provider,{createStore:function createStore(){return props.persist?(0,esm.ZP)((0,middleware.tJ)((function(set){return _objectSpread({},tableFormSlices(set))}),{name:"zst_"+props.persist,getStorage:function getStorage(){return SaveEngine}})):function useTableFormStore(){return(0,esm.ZP)((0,middleware.XR)((function(set){return _objectSpread({},tableFormSlices(set))})))}()}},table_form_jsx(TableFormComponent,(0,esm_extends.Z)({},props,{ref})))})),TableFormComponent=(0,react.forwardRef)((function(props,ref){if(0===props.columns.length)return"Please add column to props";var _useStore=useStore((function(state){return[state.data,state.setData,state.addData,state.previousData,state.saveEditAll,state.cancelEditAll]})),_useStore2=(0,slicedToArray.Z)(_useStore,6),data=_useStore2[0],setData=_useStore2[1],addData=_useStore2[2],previousData=_useStore2[3],saveEditAll=_useStore2[4],cancelEditAll=_useStore2[5];if(props.persist){var value=localStorage.getItem("zst_"+props.persist);if(value){var parsed=JSON.parse(value);lodash_default().debounce((function(){!function reloadData(parsedValue){setData(parsedValue)}(parsed,props.persist),alert("asdas")}),1e3),localStorage.removeItem("zst_"+props.persist)}}var _useStore3=useStore((function(state){return[state.selectedData,state.AddSelectedData,state.removeSelectedData,state.toggleAllSelected,state.allSelected,state.setSelectedData,state.setInitialData]})),_useStore4=(0,slicedToArray.Z)(_useStore3,7),selectedData=_useStore4[0],AddSelectedData=_useStore4[1],removeSelectedData=_useStore4[2],toggleAllSelected=_useStore4[3],allSelected=_useStore4[4],setSelectedData=_useStore4[5],setInitialData=_useStore4[6],HandleDeleteRefAction=function HandleDeleteRefAction(id){rowDeleteHandler(null,{dataItem:{rowIndex:id}})};(0,react.useImperativeHandle)(ref,(function(){return{data,selectedData,HandleFieldChange,HandleDataChange,HandleDelete:HandleDeleteRefAction,toggleAllSelected}}),[data,selectedData]);var _useStore5=useStore((function(state){return[state.isEditing,state.toggleIsEditing]})),_useStore6=(0,slicedToArray.Z)(_useStore5,2),isEditing=_useStore6[0],toggleIsEditing=_useStore6[1],_useStore7=useStore((function(state){return[state.EditRow,state.deleteRow,state.cancelEdit,state.saveEdit]})),_useStore8=(0,slicedToArray.Z)(_useStore7,4),EditRow=_useStore8[0],deleteRow=_useStore8[1],cancelEdit=_useStore8[2],saveEdit=_useStore8[3];(0,react.useEffect)((function(){var parsedData=[];parsedData=props.disableSelect?props.data.map((function(item,index){return _objectSpread(_objectSpread({},item),{},{rowIndex:index+1,expanded:!1,inEdit:!1})})):props.data.map((function(item,index){return _objectSpread(_objectSpread({},item),{},{rowIndex:index+1,expanded:!1,selected:!1,inEdit:!1})})),setData(parsedData),setInitialData(parsedData),props.defaultEditMode&&toggleIsEditing()}),[]);var handleAllDropdownTextVals=function handleAllDropdownTextVals(){if(null!=dropdownTextVals.current)for(var index in dropdownTextVals.current)for(var field in dropdownTextVals.current[index])HandleFieldChange(field,dropdownTextVals.current[index][field],index)},onItemChange=function(){var _ref2=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(event){var editedItemID,newData;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:editedItemID=event.dataItem.rowIndex,newData=data.map((function(item){return item.rowIndex===editedItemID?_objectSpread(_objectSpread({},item),{},(0,defineProperty.Z)({},event.field,event.value)):item})),setData(newData);case 3:case"end":return _context.stop()}}),_callee)})));return function onItemChange(_x){return _ref2.apply(this,arguments)}}(),handleSaveButton=function(){var _ref3=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee2(e){return regenerator_default().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:e.preventDefault(),toggleIsEditing(),handleAllDropdownTextVals(),saveEditAll();case 4:case"end":return _context2.stop()}}),_callee2)})));return function handleSaveButton(_x2){return _ref3.apply(this,arguments)}}(),handleCancelButton=function handleCancelButton(e){e.preventDefault(),toggleIsEditing(),cancelEditAll()},handleEditButton=function handleEditButton(e){e.preventDefault(),toggleIsEditing()},AddRow=function AddRow(e){e.preventDefault(),addData({rowIndex:data.length+1,inEdit:isEditing})},RemoveRow=function RemoveRow(e){e.preventDefault();var unSelected=data.filter((function(item){return!item.selected}));setData(unSelected)},HandleFieldChange=function(){var _ref4=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee3(field,value,rowIndex){var immediatelyUpdate,indexSelected,indexData,newData,_args3=arguments;return regenerator_default().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:immediatelyUpdate=_args3.length>3&&void 0!==_args3[3]&&_args3[3],indexSelected=data.findIndex((function(item){return item.rowIndex===rowIndex})),indexData=data[indexSelected],(newData=data)[indexSelected]=_objectSpread(_objectSpread({},indexData),{},(0,defineProperty.Z)({},field,value)),setData((0,toConsumableArray.Z)(newData)),immediatelyUpdate&&saveEditAll();case 7:case"end":return _context3.stop()}}),_callee3)})));return function HandleFieldChange(_x3,_x4,_x5){return _ref4.apply(this,arguments)}}(),HandleDataChange=function(){var _ref5=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee4(newData){var immediatelyUpdate,_args4=arguments;return regenerator_default().wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:immediatelyUpdate=_args4.length>1&&void 0!==_args4[1]&&_args4[1],setData((0,toConsumableArray.Z)(newData)),immediatelyUpdate&&saveEditAll();case 3:case"end":return _context4.stop()}}),_callee4)})));return function HandleDataChange(_x6){return _ref5.apply(this,arguments)}}(),DropdownTextCell=function DropdownTextCell(prop){var _useState=(0,react.useState)(),setTextCellState=(_useState[0],_useState[1]);if(prop.dataItem.inEdit){var _getCurrentValue$useT,_getCurrentValue$useT2,_getCurrentValue$useT3,getCurrentValue=prop.column.dropdownItems.filter((function(item){return item.value===prop.dataItem[prop.field]}))[0]||"";return null!==(_getCurrentValue$useT=getCurrentValue.useText)&&void 0!==_getCurrentValue$useT&&_getCurrentValue$useT&&function HandleMissingField(prop){var currentdropdownTextVals={};null!=dropdownTextVals.current&&(currentdropdownTextVals=dropdownTextVals.current),prop.dataItem.rowIndex in currentdropdownTextVals||(currentdropdownTextVals[prop.dataItem.rowIndex]={}),prop.field+"_text"in currentdropdownTextVals[prop.dataItem.rowIndex]||(currentdropdownTextVals[prop.dataItem.rowIndex][prop.field+"_text"]=""),dropdownTextVals.current=currentdropdownTextVals}(prop),table_form_jsx("td",{className:"w-12/12 ".concat(prop.cellProps.className),style:prop.cellProps.style},table_form_jsx("div",{className:null!==(_getCurrentValue$useT2=getCurrentValue.useText)&&void 0!==_getCurrentValue$useT2&&_getCurrentValue$useT2?"w-4/12 inline-block":"w-12/12 inline-block"},table_form_jsx(Select.Z,{id:"x_dropdown_".concat(prop.column.field),value:prop.dataItem[prop.field],label:prop.column.title,onChange:function onChange(e){return HandleFieldChange(prop.field,e.target.value,prop.dataItem.rowIndex)}},prop.column.dropdownItems.map((function(item,index){return table_form_jsx(MenuItem.Z,{value:item.value,key:prop.column.field+"_"+index},item.label)})))),null!==(_getCurrentValue$useT3=getCurrentValue.useText)&&void 0!==_getCurrentValue$useT3&&_getCurrentValue$useT3&&table_form_jsx("div",{className:"w-6/12 inline-block"},table_form_jsx(TextField.Z,{style:{marginBottom:15,marginTop:20,backgroundColor:"#e5e9ed"},fullWidth:!0,value:dropdownTextVals.current[prop.dataItem.rowIndex][prop.field+"_text"],onChange:function onChange(e){dropdownTextVals.current[prop.dataItem.rowIndex][prop.field+"_text"]=e.target.value,setTextCellState(e)},variant:"outlined",autoComplete:"off"})))}var _resolveValueToLabel$,resolveValueToLabel=prop.column.dropdownItems.filter((function(item){return item.value===prop.dataItem[prop.field]}))[0]||"",label=resolveValueToLabel.label;return prop.field+"_text"in prop.dataItem&&null!==(_resolveValueToLabel$=resolveValueToLabel.useText)&&void 0!==_resolveValueToLabel$&&_resolveValueToLabel$&&(label=resolveValueToLabel.label+" "+prop.dataItem[prop.field+"_text"]),table_form_jsx("td",{style:prop.cellProps.style,className:prop.cellProps.className},label||"")},TextAreaHandlerColumns=function TextAreaHandlerColumns(column){var DebouncedTextField=function debouncedInputTextField(WrappedComponent){var config=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{timeout:500};return function(_Component){(0,inherits.Z)(DebouncedTextField,_Component);var _super=_createSuper(DebouncedTextField);function DebouncedTextField(props){var _this;return(0,classCallCheck.Z)(this,DebouncedTextField),_this=_super.call(this,props),(0,defineProperty.Z)((0,assertThisInitialized.Z)(_this),"handleTextChange",(function(e){_this.setState({value:e.target.value}),_this.sendTextChange({target:{value:e.target.value}})})),(0,defineProperty.Z)((0,assertThisInitialized.Z)(_this),"sendTextChange",(function(e){_this.props.onChange(e)})),_this.state={value:_this.props.value},_this.sendTextChange=debounce_default()(_this.sendTextChange,config.timeout),_this}return(0,createClass.Z)(DebouncedTextField,[{key:"render",value:function render(){return debouncedInputTextField_jsx(WrappedComponent,(0,esm_extends.Z)({},this.props,{value:this.state.value,onChange:this.handleTextChange.bind(this)}))}}]),DebouncedTextField}(react.Component)}(TextField.Z,{timeout:1e3});return table_form_jsx(main.C4,{locked:void 0!==column.lockedCol&&column.lockedCol,key:"x_"+column.field,filterable:!1,field:column.field,title:column.title,width:column.width||100,resizable:!0,editable:column.editable,cell:function cell(props){return table_form_jsx(react.Fragment,null,table_form_jsx("td",{style:props.style,className:props.className},props.dataItem.inEdit&&table_form_jsx(react.Fragment,null,table_form_jsx(DebouncedTextField,{id:"x_textarea_".concat(column.field),value:props.dataItem[props.field],label:column.title,variant:"outlined",fullWidth:!0,multiline:!0,autoComplete:"off",onChange:function onChange(e){HandleFieldChange(props.field,e.target.value,props.dataItem.rowIndex)},size:"small"})),!props.dataItem.inEdit&&table_form_jsx(react.Fragment,null,table_form_jsx(TextField.Z,{id:"x_textarea_".concat(column.field),value:props.dataItem[props.field],label:column.title,fullWidth:!0,multiline:!0,autoComplete:"off",InputProps:{readOnly:!0},size:"small"}))))}})},CustomActionToolbar=function CustomActionToolbar(props){return table_form_jsx("button",{onClick:function onClick(e){e.preventDefault(),props.action()}},table_form_jsx("span",{className:"cursor",id:"btn_".concat(props.name)},props.icon,props.name))},componentsToolbar={AddRow:function AddRowToolbar(){return!props.disableAddToolbar&&table_form_jsx("button",{onClick:AddRow},table_form_jsx("span",{className:"cursor",id:"btn_AddRowToolbar"},table_form_jsx(AddCircle.Z,{color:"action",fontSize:"small"}),"Add Row"))},RemoveRow:function RemoveRowToolbar(){return!props.disableRemoveToolbar&&table_form_jsx("button",{onClick:RemoveRow},table_form_jsx("span",{className:"cursor",id:"btn_RemoveRowToolbar"},table_form_jsx(DeleteForever.Z,{color:"action",fontSize:"small"}),"Remove"))},EditMode:function EditModeToolbar(){return!props.disableEditToolbar&&(isEditing?table_form_jsx(react.Fragment,null,table_form_jsx("button",{onClick:handleSaveButton},table_form_jsx("span",{className:"cursor",id:"btn_SaveToolbar"},table_form_jsx(Save.Z,{color:"action",fontSize:"small"}),"Save")),table_form_jsx("button",{onClick:handleCancelButton},table_form_jsx("span",{className:"cursor",id:"btn_SaveToolbar"},table_form_jsx(Cancel.Z,{color:"action",fontSize:"small"}),"Cancel"))):table_form_jsx("button",{onClick:handleEditButton},table_form_jsx("span",{className:"cursor",id:"btn_EditModeToolbar"},table_form_jsx(Edit.Z,{color:"action",fontSize:"small"}),"Edit")))}},_useState2=(0,react.useState)(["AddRow","RemoveRow","EditMode"]),toolbarOrder=_useState2[0],setToolbarOrder=_useState2[1],dropdownTextVals=(0,react.useRef)(),ToolbarRenderer=function ToolbarRenderer(props){var toolbar=props.toolbar;return table_form_jsx(toolbar,props)};(0,react.useEffect)((function(){setToolbarOrder(props.toolbarOrder)}),[props.toolbarOrder]);var rowDeleteHandler=function rowDeleteHandler(e,props){e&&e.preventDefault(),deleteRow(props.dataItem.rowIndex),saveEditAll()},rowSaveHandler=function rowSaveHandler(e,props){e.preventDefault();var handledProps=function handleRowDropdownTextVals(prop){if(null==dropdownTextVals.current)return prop;for(var field in dropdownTextVals.current[prop.dataItem.rowIndex])prop.dataItem[field]=dropdownTextVals.current[prop.dataItem.rowIndex][field];return prop}(props);saveEdit(handledProps.dataItem.rowIndex)};(0,react.useEffect)((function(){props.handleChange&&props.handleChange(deconstructReservedVariables(previousData))}),[previousData]),(0,react.useEffect)((function(){props.handleChangeSelected&&props.handleChangeSelected(deconstructReservedVariables(selectedData))}),[selectedData]);return table_form_jsx(react.Fragment,null,table_form_jsx(main.rj,{style:{marginTop:20,height:"auto"},data,resizable:!0,selectedField:props.disableSelect?null:"selected",reorderable:!0,editField:"inEdit",selectable:{enabled:!0,drag:!1,cell:!1,mode:"multiple"},onSelectionChange:function onSelectionChange(e){!function onSelectionChange(rowIndex){var indexSelected=data.findIndex((function(item){return item.rowIndex===rowIndex.rowIndex})),indexData=data[indexSelected],newData=data;newData[indexSelected]=_objectSpread(_objectSpread({},indexData),{},{selected:!indexData.selected}),1==!indexData.selected?AddSelectedData(newData[indexSelected].rowIndex):removeSelectedData(newData[indexSelected].rowIndex),setData((0,toConsumableArray.Z)(newData))}(e.dataItem)},onHeaderSelectionChange:function onHeaderSelectionChange(){!function onHeaderSelectionChange(){var dataItems=data.map((function(item){return _objectSpread(_objectSpread({},item),{},{selected:!allSelected})}));toggleAllSelected(),setData(dataItems),setSelectedData(allSelected?[]:data)}()},onItemChange,expandField:"expanded",onExpandChange:function expandChange(event){var newData=data.map((function(item){return item.rowIndex===event.dataItem.rowIndex&&(item.expanded=!event.dataItem.expanded),item}));setData(newData)},detail:props.detailComponent},table_form_jsx(main.tL,null,"There is no data available."),table_form_jsx(main.np,null,toolbarOrder.map((function(item,index){if(Object.keys(componentsToolbar).includes(item))return table_form_jsx(ToolbarRenderer,{key:index,toolbar:componentsToolbar[item]});if(props.customToolbars){var itemToolbar=props.customToolbars.filter((function(toolbar){return toolbar.name===item}))[0];return itemToolbar&&!itemToolbar.component?table_form_jsx(CustomActionToolbar,{name:itemToolbar.name,action:itemToolbar.action,icon:itemToolbar.icon}):itemToolbar&&itemToolbar.component?table_form_jsx(react.Fragment,null,itemToolbar.component):void 0}}))),!props.disableSelect&&table_form_jsx(main.C4,{filterable:!1,field:"selected",width:30,headerSelectionValue:selectedData.length===data.length}),props.rowNumber&&table_form_jsx(main.C4,{filterable:!1,field:"number",title:"No.",width:40,cell:function cell(props){return table_form_jsx("td",null,props.dataIndex+1)}}),props.columns.map((function(column){return"dropdown"===column.type?function DropDownHandlerColumns(column){return table_form_jsx(main.C4,{locked:void 0!==column.lockedCol&&column.lockedCol,key:"x_"+column.field,filterable:!1,field:column.field,title:column.title,width:column.width||100,resizable:!0,editable:column.editable,cell:function cell(props){if(props.dataItem.inEdit)return table_form_jsx("td",{style:props.style,className:props.className},table_form_jsx(Select.Z,{id:"x_dropdown_".concat(column.field),value:props.dataItem[props.field],label:column.title,onChange:function onChange(e){return HandleFieldChange(props.field,e.target.value,props.dataItem.rowIndex)}},column.dropdownItems.map((function(item,index){return table_form_jsx(MenuItem.Z,{value:item.value,key:column.field+"_"+index},item.label)}))));var resolveValueToLabel=column.dropdownItems.filter((function(item){return item.value===props.dataItem[props.field]}))[0]||"";return table_form_jsx("td",{style:props.style,className:props.className},resolveValueToLabel.label||"")}})}(column):"dropdown-text"===column.type?function DropDownTextHandlerColumns(column){return table_form_jsx(main.C4,{locked:void 0!==column.lockedCol&&column.lockedCol,key:"x_"+column.field,filterable:!1,field:column.field,title:column.title,width:column.width||100,resizable:!0,editable:column.editable,cell:function cell(prop){return table_form_jsx(DropdownTextCell,{dataItem:prop.dataItem,field:prop.field,column,cellProps:prop})}})}(column):"file"===column.type?function FileHandlerColumns(column){return table_form_jsx(main.C4,{locked:void 0!==column.lockedCol&&column.lockedCol,key:"x_"+column.field,filterable:!1,field:column.field,title:column.title,width:column.width||100,resizable:!0,editable:column.editable,cell:function cell(prop){var _column$fileModel;return table_form_jsx("td",{style:prop.style,className:prop.className},table_form_jsx(upload_file_icon,{value:prop.dataItem[prop.field],disabled:!prop.dataItem.inEdit,fileModel:null!==(_column$fileModel=column.fileModel)&&void 0!==_column$fileModel?_column$fileModel:{},onChange:function onChange(e){HandleFieldChange(prop.field,e,prop.dataItem.rowIndex,!0),HandleFieldChange(prop.field+"_text",e,prop.dataItem.rowIndex,!0)},className:"k-switch-no-bg"}))}})}(column):"switch"===column.type?function SwitchHandlerColumns(column){return table_form_jsx(main.C4,{locked:void 0!==column.lockedCol&&column.lockedCol,key:"x_"+column.field,filterable:!1,field:column.field,title:column.title,width:column.width||100,resizable:!0,editable:column.editable,cell:function cell(props){return table_form_jsx("td",{style:props.style,className:props.className},table_form_jsx(es_main.rs,{disabled:!props.dataItem.inEdit,checked:props.dataItem[props.field],onChange:function onChange(e){HandleFieldChange(props.field,e.value,props.dataItem.rowIndex)},className:"k-switch-no-bg"}))}})}(column):"textarea"===column.type?TextAreaHandlerColumns(column):"custom"===column.type?function CustomRendererColumns(column){return table_form_jsx(main.C4,{locked:void 0!==column.lockedCol&&column.lockedCol,key:"x_"+column.field,filterable:!1,field:column.field,title:column.title,width:column.width||100,resizable:!0,editable:column.editable,cell:function cell(props){return table_form_jsx(column.render,props)}})}(column):"free-solo-text"===column.type?function FreeSoloTextHandlerColumns(column){return table_form_jsx(main.C4,{locked:void 0!==column.lockedCol&&column.lockedCol,key:"x_"+column.field,filterable:!1,field:column.field,title:column.title,width:column.width||100,resizable:!0,editable:column.editable,cell:function cell(props){if(props.dataItem.inEdit)return table_form_jsx("td",{style:props.style,className:props.className},table_form_jsx(Autocomplete.ZP,{freeSolo:!0,autoSelect:!0,options:column.dropdownItems.map((function(option){return option.label})),onChange:function onChange(_,e){HandleFieldChange(props.field,e,props.dataItem.rowIndex)},value:props.dataItem[props.field],renderInput:function renderInput(params){return table_form_jsx(TextField.Z,(0,esm_extends.Z)({},params,{label:props.title}))}}));var resolveValueToLabel=column.dropdownItems.filter((function(item){return item.label===props.dataItem[props.field]}))[0]||props.dataItem[props.field];return table_form_jsx("td",{style:props.style,className:props.className},(null==resolveValueToLabel?void 0:resolveValueToLabel.label)||resolveValueToLabel)}})}(column):function HandlerColumns(column){return table_form_jsx(main.C4,{locked:void 0!==column.lockedCol&&column.lockedCol,key:"x_"+column.field,filterable:!1,field:column.field,title:column.title,width:column.width||100,resizable:!0,editable:column.editable,format:"{0:dd-MM-yyyy}",editor:column.type})}(column)})),props.removeRowColumn&&table_form_jsx(main.C4,{locked:!0,filterable:!1,field:"action",title:"Action",width:120,cell:function cell(props){return table_form_jsx("td",{style:props.style,className:props.className},table_form_jsx(react.Fragment,null,table_form_jsx("button",{onClick:function onClick(e){return rowDeleteHandler(e,props)}},table_form_jsx("span",{className:"cursor",id:"btn_RemoveRow_".concat(props.dataIndex)},table_form_jsx(DeleteForever.Z,{color:"action",fontSize:"small"})))))}}),!props.disableColumnAction&&table_form_jsx(main.C4,{locked:!0,filterable:!1,field:"action",title:"Action",width:120,cell:function cell(prop){return table_form_jsx("td",{style:_objectSpread(_objectSpread({},prop.style),{},{position:"sticky",left:"0",zIndex:"1 !important"}),className:prop.className},prop.dataItem.inEdit?table_form_jsx(react.Fragment,null,table_form_jsx("button",{onClick:function onClick(e){return rowSaveHandler(e,prop)}},table_form_jsx("span",{className:"cursor",id:"btn_SaveRow_".concat(prop.dataIndex)},table_form_jsx(Save.Z,{color:"action",fontSize:"small"}))),table_form_jsx("button",{onClick:function onClick(e){return function rowCancelHandler(e,props){e.preventDefault(),cancelEdit(props.dataItem.rowIndex)}(e,prop)}},table_form_jsx("span",{className:"cursor",id:"btn_CancelRow_".concat(prop.dataIndex)},table_form_jsx(Cancel.Z,{color:"action",fontSize:"small"})))):table_form_jsx(react.Fragment,null,!props.disableEditRow&&table_form_jsx("button",{onClick:function onClick(e){return function rowEditHandler(e,props){e.preventDefault(),EditRow(props.dataItem.rowIndex)}(e,prop)}},table_form_jsx("span",{className:"cursor",id:"btn_EditModeRow_".concat(prop.dataIndex)},table_form_jsx(Edit.Z,{color:"action",fontSize:"small"}))),!props.disableRemoveRow&&table_form_jsx("button",{onClick:function onClick(e){return rowDeleteHandler(e,prop)}},table_form_jsx("span",{className:"cursor",id:"btn_RemoveRow_".concat(prop.dataIndex)},table_form_jsx(DeleteForever.Z,{color:"action",fontSize:"small"})))))}})))}));TableForm.__docgenInfo={description:"",methods:[],displayName:"TableForm"};const table_form=TableForm}}]);